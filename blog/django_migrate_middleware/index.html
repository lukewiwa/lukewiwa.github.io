<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Django Migrate Middleware</title><link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css"><link rel="stylesheet" href="/index.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark.min.css" media="screen and (prefers-color-scheme: dark)"></head><body><header><nav class="flex flex-row items-center justify-between"><a href="/" class="link nav-brand no-underline dtc w-25 f3">Wiwa</a><div class="dtc v-mid w-75 tr"><a href="/blog" class="link nav-link f6 f5-ns dib mr3 mr4-ns b">Blog</a><a href="/projects" class="link nav-link f6 f5-ns dib mr3 mr4-ns ">Projects</a></div></nav></header><main class="pt-4"><article><h1 class="f2">Django Migrate Middleware</h1><time class="db mb1 gray">2022-12-28</time><div><p>I created a <a href="https://pypi.org/project/django-migrate-middleware/">python package</a> that runs django migrations on every request. It seems silly but has been useful for creating <em>almost</em> stateless AWS Lambda functions using django.</p>
<!--more-->
<p>I've found using django in AWS Lambdas pretty useful for creating little websites that need a little server work and can't be fully static. Sometimes I want a little state and the power of django's database integration between a request and a response has proven really useful. Using an ephemeral sqlite database in the <code>/tmp</code> directory is really handy for stuff like this. As such this package allows each request to have a database available.</p>
<p>An example of this pattern is implemented in my <a href="https://setfire.lukewiwa.com">set fire to emoji</a> website. You can see <a href="https://github.com/lukewiwa/set-fire-to-emoji/blob/main/src/config/settings.py#L71">in the source</a> where my package being used.</p>
</div></article></main></body></html>