<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Bottle URL Redirect</title><link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css"><link rel="stylesheet" href="/index.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github.min.css"></head><body><header><nav class="flex flex-row items-center justify-between"><a href="/" class="link nav-brand no-underline dtc w-25 f3">Wiwa</a><div class="dtc v-mid w-75 tr"><a href="/blog" class="link nav-link f6 f5-ns dib mr3 mr4-ns b">Blog</a><a href="/projects" class="link nav-link f6 f5-ns dib mr3 mr4-ns ">Projects</a></div></nav></header><main class="pt-4"><div><article><h1 class="f2">Bottle URL Redirect</h1><time class="db gray mb1">5/23/2017</time><div><p>I've been making a little web app for my partner and I. I decided to use the <a href="https://bottlepy.org/docs/0.12/">Bottle</a> framework as opposed to <a href="http://flask.pocoo.org/docs/0.12/">Flask</a> since I've always liked the lightness of Bottle and my little app has no need for scaling.</p>
<p>Flask and Bottle seem have much the same features but there's one pattern in particular that is done easily in Flask but wasn't obvious in Bottle. In many flask tutorials a simple redirect to a url, usually after an authentication seems easily done.</p>
<p>In Flask it's basically implemented like this:</p>
<pre><code class="language-python hljs"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> route, redirect, url_for

<span class="hljs-meta">@route(<span class="hljs-params"><span class="hljs-string">'/'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">'home'</span>

<span class="hljs-meta">@route(<span class="hljs-params"><span class="hljs-string">'/redirected'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">redirected</span>():
    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">'root'</span>))
</code></pre>
<p>In Bottle this can be done with the little documented <code>url</code> method, however it works a little bit differently. The route needs to be named using a keyword argument, but then the rest is much the same.</p>
<pre><code class="language-python hljs"><span class="hljs-keyword">from</span> bottle <span class="hljs-keyword">import</span> route, redirect, url

<span class="hljs-meta">@route(<span class="hljs-params"><span class="hljs-string">'/'</span>, name=<span class="hljs-string">'home'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">'home'</span>

<span class="hljs-meta">@route(<span class="hljs-params"><span class="hljs-string">'/redirected'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">redirected</span>():
    <span class="hljs-keyword">return</span> redirect(url(<span class="hljs-string">'home'</span>))
</code></pre>
</div></article></div></main></body></html>